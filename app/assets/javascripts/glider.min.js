(function(){"use strict";var n;n=angular.module("glider",[]),n.directive("slider",["$document",function(n){var e,a;return e=function(n,e){return n[0].getElementsByClassName(e)[0]},a=function(n,a){return angular.element(e(n,"handle")).css("left",""+a+"%"),angular.element(e(n,"range")).css("width",""+a+"%")},{template:'<span class="g-slider horizontal">\n  <span class="slider">\n    <span class="range"></span>\n    <span class="handle" ng-mousedown="mouseDown($event)">\n      <span class="value" ng-show="showValueInHandle">{{value | intersperse}}</span>\n    </span>\n  </span>\n  <span class="side dec">\n    <span class="button" ng-click="step(-1)">-</span>\n    <span class="bound-value">{{min() | intersperse}}</span>\n  </span>\n  <span class="side inc">\n    <span class="button" ng-click="step(+1)">+</span>\n    <span class="bound-value">{{max() | intersperse}}</span>\n  </span>\n  <span class="increments">\n    <span ng-repeat="i in increments" class="i" style="left: {{i.offset}}%">\n      {{ i.value | intersperse }}\n    </span>\n  </span>\n</span>',replace:!0,restrict:"E",scope:{value:"=",min:"&",max:"&"},link:function(s,t,r){var u,l,i,o,c,p,f,v;return o=function(){var n,e,a,t,u,l;return l=function(n){return n?n.replace(/^\s+|\s+$/g,""):n},u=function(n,e,a){return a=parseInt(a)-n,100*(a/Math.abs(e-n))},r.increments?(t=s.min(),a=s.max(),e=r.increments.split(","),e=function(){var s,r,i,o;for(o=[],s=0,r=e.length;r>s;s++)n=e[s],t<(i=parseInt(n))&&a>i&&o.push({value:parseInt(l(n),10),offset:u(t,a,n)});return o}()):void 0},u=function(n){var e;return null!=r.increments?[s.min(),s.max()].concat(function(){var a,s,t;for(t=[],a=0,s=n.length;s>a;a++)e=n[a],t.push(e.value);return t}()).sort(function(n,e){return n-e}):void 0},p=e(t,"slider"),i=!1,v=0,f=null!=r.step?parseInt(r.step,10):1,l=null!=r.deferUpdate,s.showValueInHandle=null!=r.showValueInHandle,null==s.value&&(s.value=s.min()),s.increments=o(r.increments),s.snapValues=u(s.increments),c=function(){var n;return n=s.max()-s.min(),0===n?v=0:(v=100*((s.value-s.min())/n),v=Math.min(Math.max(0,v),100)),a(t,v)},s.$watch("min()",function(n){return s.value<n?s.value=n:c()}),s.$watch("max()",function(n){return s.value>n?s.value=n:c()}),s.$watch("value",function(n,e){return i?void 0:s.min()<=n&&n<=s.max()?c():n=e}),s.step=function(n){var e,a;return a=function(n){var e;return e=s.value+n*f,s.min()<=e&&e<=s.max()?s.value=e:void 0},e=function(n){var e,a;return e=n>0?function(){var n,e,t,r;for(t=s.snapValues,r=[],n=0,e=t.length;e>n;n++)a=t[n],a>s.value&&r.push(a);return r}()[0]:function(){var n,e,t,r;for(t=s.snapValues,r=[],n=0,e=t.length;e>n;n++)a=t[n],a<s.value&&r.push(a);return r}().sort(function(n,e){return e-n})[0],null!=e?s.value=e:void 0},null!=r.increments?e(n):a(n)},s.mouseDown=function(e){var r,u,o;if(angular.element(e.target).hasClass("handle"))return i=!0,u=e.pageX,o=function(){return s.value=Math.round(((s.max()-s.min())*(v/100)+s.min())/f)*f,s.$apply()},r=function(){var n,e,a,t,r;for(a=0,t=s.snapValues.length;t>a;)e=Math.abs(s.snapValues[a]-s.value),("undefined"==typeof r||null===r)&&(r=e),r>=e&&(n=s.snapValues[a],r=e),a++;return s.value=n,s.$apply()},n.on("mousemove",function(n){var e;if(i)return e=n.pageX-u,v+=100*(e/p.offsetWidth),0>v?v=0:v>100?v=100:u=n.pageX,l||o(),a(t,v)}),n.on("mouseup",function(){return i=!1,l&&o(),s.increments&&r(),n.off("mousemove")})}}}}]),n.filter("intersperse",function(){return function(n){var e,a,s,t;if(null!=n)return n=n.toString(),e=function(n){return n.split("").reverse().join("")},a=e(n),s=a.replace(/(.{3})/g,"$1 "),t=e(s),t.trim()}})}).call(this);